<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.Cursor?>
<?import javafx.scene.chart.PieChart?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<VBox alignment="TOP_CENTER"
      prefHeight="411"
      prefWidth="638"
      spacing="15"
      stylesheets="@/css/wallet.css"
      xmlns="http://javafx.com/javafx/23.0.1"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.finance_app.finance_app.controller.WalletController">

    <children>

        <!--  Barra superior con t铆tulo y notificaciones -->
        <HBox alignment="CENTER_RIGHT" spacing="10" prefWidth="638">
            <children>
                <Label fx:id="titleLabel"
                       text="Mi cartera"
                       styleClass="title-label">
                    <HBox.margin>
                        <Insets left="20"/>
                    </HBox.margin>
                </Label>

                <StackPane fx:id="notificationStack" prefWidth="40" alignment="CENTER">
                    <children>
                        <ImageView fx:id="bellIcon"
                                   fitHeight="28"
                                   fitWidth="28"
                                   preserveRatio="true" />

                        <Label fx:id="notificationCountLabel"
                               text="0"
                               styleClass="notification-badge"
                               StackPane.alignment="TOP_RIGHT" />

                        <Button fx:id="invisibleNotificationButton"
                                opacity="0"
                                prefWidth="40"
                                prefHeight="35"
                                onAction="#goToNotifications">
                            <cursor>
                                <Cursor fx:constant="HAND"/>
                            </cursor>
                        </Button>
                    </children>
                    <HBox.margin>
                        <Insets right="20"/>
                    </HBox.margin>
                </StackPane>
            </children>
            <VBox.margin>
                <Insets top="10"/>
            </VBox.margin>
        </HBox>

        <!--  Total disponible -->
        <Label fx:id="totalWallet"
               text="0"
        styleClass="total-wallet-label">
        </Label>

        <!--  Tabla + PieChart -->
        <HBox alignment="CENTER" spacing="40">
            <children>

                <!-- Tabla -->
                <VBox alignment="CENTER">
                    <children>
                        <TableView fx:id="transactionList" prefWidth="270">
                            <columns>
                                <TableColumn fx:id="transactionType" prefWidth="90" text="Tipo"/>
                                <TableColumn fx:id="transactionAmount" prefWidth="90" text="Monto"/>
                                <TableColumn fx:id="transactionCategory" prefWidth="120" text="Categor铆a"/>
                                <TableColumn fx:id="transactionDate" prefWidth="130" text="Fecha"/>
                            </columns>
                        </TableView>

                        <Button fx:id="allTransactions"
                                text="Ver m谩s"
                                onAction="#goToAllTransactions"
                                styleClass="secondary-button">
                            <VBox.margin>
                                <Insets top="6"/>
                            </VBox.margin>
                        </Button>
                    </children>
                </VBox>

                <!-- Pie chart -->
                <PieChart fx:id="chart"
                          prefWidth="260"
                          prefHeight="200"
                          labelsVisible="false"
                          labelLineLength="0"/>
            </children>

            <VBox.margin>
                <Insets top="10" bottom="10"/>
            </VBox.margin>
        </HBox>

        <!--  Acciones principales -->
        <HBox alignment="CENTER" spacing="25">
            <children>
                <Button fx:id="buttonAddTransaction"
                        text="Agregar transacci贸n"
                        onAction="#goToAddTransaction"
                        styleClass="primary-button"/>

                <Button fx:id="buttonAsignLimit"
                        text="Asignar l铆mite"
                        onAction="#goToAsignationLimit"
                        styleClass="secondary-button"/>
            </children>
        </HBox>

        <!-- 锔 Configuraci贸n y cerrar sesi贸n -->
        <HBox alignment="CENTER" spacing="230" prefWidth="638">
            <children>
                <Button text="Configuraci贸n"
                        onAction="#goToConfiguration"
                        styleClass="text-button"/>

                <Button fx:id="closeSession"
                        text="Cerrar sesi贸n"
                        onAction="#closeMySession"
                        styleClass="text-button"/>
            </children>

            <VBox.margin>
                <Insets bottom="15"/>
            </VBox.margin>
        </HBox>

    </children>

</VBox>
